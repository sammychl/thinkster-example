<div class="container posts-page">

  <div class="post row">
    <!-- voting -->
    <div class="col-xs-1">
      <div class="vote up"><span ng-hide="downVoted()" ng-click="upVotePost(upVoted())">&#x25B2;</span></div>
      <div class="vote down"><span ng-hide="upVoted()" ng-click="downVotePost(downVoted())">&#x25BC;</span></div>
    </div>


    <!-- info -->
    <div class="col-md-9 col-xs-11">
      <div>
	<span class="info">{{post.title}}</span>
	<a href="http://{{post.url}}">
	  <span class="url">({{post.url | hostnameFromUrl}})</span>
	</a>
	<span>{{post.description}}</span>
      </div>
      

      <div>
	<span>submitted by <a href="#users/{{post.owner}}">{{post.ownerDisplayName}}</a></span>
      </div>
    </div>
    <div class="col-md-2">
      <button type="button" class="pull-right btn btn-default" ng-show="!subscribed(postId) && signedIn()" ng-click="subscribe(postId, subscribed(postId))">Join in</button>
      <button type="button" class="pull-right btn btn-default" ng-show="subscribed(postId) && signedIn()" ng-click="unsubscribe(postId, subscribed(postId))">Unsubscribe</button>
    </div>
  </div>

  <!-- ng-repeat comments -->
  <div ng-repeat="(commentId, comment) in post.comments" class="row cmt">
    <div class="col-md-12">
      <p>{{comment.text}}</p>
      <p class="author">posted by 
	<a href="#users/{{comment.username}}">{{comment.username}}</a>
	<a ng-click="removeComment(comment, commentId)" ng-show="signedIn() && comment.username == currentUser.username">(delete)</a>
      </p>
    </div>
  </div>

  <!-- comment entry form -->

  
  <div class="cmt-form">
    <div ng-hide="signedIn()">
      <p><a href="#/login">Sign in</a>to post a comment</p>
    </div>
    <form ng-show="signedIn()">
      <textarea ng-model="comment.text" placeholder="Post a comment" class="form-control"></textarea> <br />
      <input type="submit" ng-click="addComment()" value="Post Comment" class="btn btn-primary" />
    </form>
  </div>

</div>  



<a href="#/posts">Back to Posts</a></div>

